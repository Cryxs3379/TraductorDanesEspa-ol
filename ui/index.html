<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traductor ES â†’ DA | Correos Corporativos</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>ğŸ“§ Traductor EspaÃ±ol â†’ DanÃ©s</h1>
            <p class="subtitle">Para correos corporativos â€¢ 100% local y privado</p>
            <div class="status-indicator" id="statusIndicator">
                <span class="status-dot"></span>
                <span class="status-text">Verificando conexiÃ³n...</span>
            </div>
            <div class="metrics-bar" id="metricsBar" hidden>
                <span id="cacheStats"></span>
            </div>
        </header>

        <!-- Selector de DirecciÃ³n -->
        <div class="direction-selector">
            <label for="directionSelect" class="direction-label">
                ğŸ”„ DirecciÃ³n:
            </label>
            <select id="directionSelect" class="direction-dropdown">
                <option value="es-da" selected>ğŸ‡ªğŸ‡¸ EspaÃ±ol â†’ ğŸ‡©ğŸ‡° DanÃ©s</option>
                <option value="da-es">ğŸ‡©ğŸ‡° DanÃ©s â†’ ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
            </select>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-button active" data-tab="text">
                ğŸ“ Texto
            </button>
            <button class="tab-button" data-tab="html">
                ğŸŒ HTML (correo)
            </button>
        </div>

        <!-- Tab: Texto -->
        <div class="tab-content active" id="textTab">
            <div class="translation-workspace">
                <div class="column">
                    <div class="column-header">
                        <h3>ğŸ‡ªğŸ‡¸ EspaÃ±ol</h3>
                        <div class="file-actions">
                            <label for="fileInputText" class="btn-file">
                                ğŸ“ Cargar archivo
                            </label>
                            <input type="file" id="fileInputText" accept=".txt" hidden>
                        </div>
                    </div>
                    <textarea 
                        id="sourceText" 
                        class="text-area" 
                        placeholder="Escribe o pega tu texto en espaÃ±ol aquÃ­...&#10;&#10;Puedes cargar archivos .txt usando el botÃ³n de arriba."
                        spellcheck="true"
                        lang="es"
                    ></textarea>
                    <div class="text-info">
                        <span id="sourceCharCount">0 caracteres</span>
                    </div>
                </div>

                <div class="column">
                    <div class="column-header">
                        <h3>ğŸ‡©ğŸ‡° DanÃ©s</h3>
                        <div class="actions">
                            <button id="copyText" class="btn-action" disabled title="Copiar al portapapeles">
                                ğŸ“‹ Copiar
                            </button>
                            <button id="saveText" class="btn-action" disabled title="Guardar como archivo">
                                ğŸ’¾ Guardar
                            </button>
                        </div>
                    </div>
                    <textarea 
                        id="targetText" 
                        class="text-area" 
                        placeholder="La traducciÃ³n aparecerÃ¡ aquÃ­..."
                        readonly
                        lang="da"
                    ></textarea>
                    <div class="text-info">
                        <span id="targetCharCount">0 caracteres</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: HTML -->
        <div class="tab-content" id="htmlTab">
            <div class="translation-workspace">
                <div class="column">
                    <div class="column-header">
                        <h3>ğŸ‡ªğŸ‡¸ HTML EspaÃ±ol</h3>
                        <div class="file-actions">
                            <label for="fileInputHtml" class="btn-file">
                                ğŸ“ Cargar archivo
                            </label>
                            <input type="file" id="fileInputHtml" accept=".html,.htm" hidden>
                        </div>
                    </div>
                    <textarea 
                        id="sourceHtml" 
                        class="text-area code" 
                        placeholder="Pega el cÃ³digo HTML de tu correo aquÃ­...&#10;&#10;Ejemplo:&#10;<p>Estimado cliente,</p>&#10;<p>Gracias por contactarnos.</p>"
                        spellcheck="false"
                    ></textarea>
                    <div class="preview-section">
                        <h4>Vista previa</h4>
                        <div id="sourcePreview" class="preview-box">
                            <em>La vista previa aparecerÃ¡ aquÃ­...</em>
                        </div>
                    </div>
                </div>

                <div class="column">
                    <div class="column-header">
                        <h3>ğŸ‡©ğŸ‡° HTML DanÃ©s</h3>
                        <div class="actions">
                            <button id="copyHtml" class="btn-action" disabled title="Copiar HTML">
                                ğŸ“‹ Copiar
                            </button>
                            <button id="saveHtml" class="btn-action" disabled title="Guardar como .html">
                                ğŸ’¾ Guardar
                            </button>
                        </div>
                    </div>
                    <textarea 
                        id="targetHtml" 
                        class="text-area code" 
                        placeholder="El HTML traducido aparecerÃ¡ aquÃ­..."
                        readonly
                    ></textarea>
                    <div class="preview-section">
                        <h4>Vista previa</h4>
                        <div id="targetPreview" class="preview-box">
                            <em>La vista previa aparecerÃ¡ aquÃ­...</em>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Glosario y ConfiguraciÃ³n -->
        <div class="settings-panel">
            <details>
                <summary>âš™ï¸ ConfiguraciÃ³n y Glosario</summary>
                <div class="settings-content">
                    <div class="setting-group">
                        <label for="glossaryInput">
                            ğŸ“š Glosario personalizado
                            <span class="help-text">
                                Un tÃ©rmino por lÃ­nea, formato: espaÃ±ol=danÃ©s
                            </span>
                        </label>
                        <textarea 
                            id="glossaryInput" 
                            class="glossary-input"
                            placeholder="Acme=Acme&#10;Corporation=Selskab&#10;Python=Python"
                            rows="5"
                        ></textarea>
                    </div>

                    <div class="setting-group">
                        <label for="maxTokens">
                            Tokens mÃ¡ximos por traducciÃ³n: <span id="maxTokensValue">256</span>
                        </label>
                        <input 
                            type="range" 
                            id="maxTokens" 
                            min="64" 
                            max="512" 
                            value="256" 
                            step="64"
                        >
                    </div>

                    <div class="setting-group">
                        <label for="apiUrl">
                            ğŸ”Œ URL del API
                        </label>
                        <input 
                            type="text" 
                            id="apiUrl" 
                            value="http://localhost:8000"
                            placeholder="http://localhost:8000"
                        >
                    </div>
                </div>
            </details>
        </div>

        <!-- BotÃ³n de traducciÃ³n -->
        <div class="translate-section">
            <button id="translateBtn" class="btn-translate" disabled>
                ğŸ”„ Traducir
            </button>
            <div id="loadingIndicator" class="loading-indicator" hidden>
                <div class="spinner"></div>
                <span>Traduciendo...</span>
            </div>
            <div id="errorMessage" class="error-message" hidden></div>
            <div id="successMessage" class="success-message" hidden></div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>
                Traductor local ESâ†’DA con NLLB + CTranslate2 â€¢ 
                Sin conexiÃ³n a Internet â€¢ 
                100% privado
            </p>
            <p class="footer-links">
                <a href="http://localhost:8000/docs" target="_blank">ğŸ“– API Docs</a> â€¢
                <a href="https://github.com/facebookresearch/fairseq/tree/nllb" target="_blank">â„¹ï¸ Sobre NLLB</a>
            </p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>

